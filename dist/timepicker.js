!function(t){"use strict";!function(t,e){void 0===e&&(e={});var i=e.insertAt;if("undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===i&&o.firstChild?o.insertBefore(s,o.firstChild):o.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}(":root{--tp-primary-color:#06c;--tp-bg-color:#fff;--tp-border-color:#ccc;--tp-hover-bg:#f0f0f0;--tp-text-color:#333;--tp-shadow:0 10px 30px rgba(0,0,0,.2)}.tp-wrapper{display:inline-block;position:relative;width:100%}.tp-input{-webkit-appearance:none;appearance:none;background-color:var(--tp-bg-color);border:1px solid #ddd;border-radius:4px;box-sizing:border-box;cursor:text;font-family:inherit;font-size:16px;padding:8px 35px 8px 12px;transition:border-color .2s;width:100%}.tp-input:hover{border-color:#bbb}.tp-input:focus{border-color:var(--tp-primary-color);box-shadow:0 0 0 3px rgba(0,102,204,.1);outline:none}.tp-icon{height:20px;opacity:.5;pointer-events:none;position:absolute;right:8px;top:50%;transform:translateY(-50%);width:20px}.tp-popup{background:var(--tp-bg-color);border:1px solid var(--tp-border-color);border-radius:8px;box-shadow:var(--tp-shadow);display:none;left:0;margin-top:4px;padding:8px;position:absolute;top:100%;width:160px;z-index:1000}.tp-popup.show{display:block}.tp-container{display:flex;gap:8px;height:200px}.tp-column{flex:1;overflow-x:hidden;overflow-y:auto;padding:4px;scroll-behavior:smooth}.tp-column::-webkit-scrollbar{width:6px}.tp-column::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.tp-column::-webkit-scrollbar-thumb{background:#ccc;border-radius:3px}.tp-column::-webkit-scrollbar-thumb:hover{background:#999}.tp-item{border-radius:6px;cursor:pointer;font-size:16px;padding:8px 12px;text-align:center;transition:all .2s;user-select:none}.tp-item:hover{background-color:var(--tp-hover-bg)}.tp-item.selected{background-color:var(--tp-primary-color);color:#fff;font-weight:500}.tp-overlay{bottom:0;display:none;left:0;position:fixed;right:0;top:0;z-index:999}.tp-overlay.show{display:block}");class e{static instances=[];constructor(t,e={}){this.input="string"==typeof t?document.getElementById(t):t,this.input?(this.config={minuteStep:30,format:"HH:mm",...e},this.wrapper=this.input.parentElement,this.uniqueId="time-picker-"+Math.random().toString(36).substr(2,9),this.ensureGlobalOverlay(),this.overlay=document.getElementById("tp-global-overlay"),this.selectedHour=null,this.selectedMinute=null,this.isOpen=!1,this.justOpened=!1,this.init()):console.error("TimePicker: Input element not found")}init(){this.createPopup(),this.generateTimeOptions(),this.setupEventListeners(),e.instances.push(this)}ensureGlobalOverlay(){if(!document.getElementById("tp-global-overlay")){const t=document.createElement("div");t.id="tp-global-overlay",t.className="tp-overlay",document.body.appendChild(t),t.addEventListener("click",()=>{e.closeAllPickers()})}}createPopup(){this.popup=document.createElement("div"),this.popup.className="tp-popup",this.popup.id=this.uniqueId,this.popup.setAttribute("role","dialog"),this.popup.setAttribute("aria-modal","true"),this.popup.setAttribute("aria-label","Time Picker"),this.popup.innerHTML='\n            <div class="tp-container">\n                <div class="tp-column tp-hour-column" role="listbox" aria-label="Hours"></div>\n                <div class="tp-column tp-minute-column" role="listbox" aria-label="Minutes"></div>\n            </div>\n        ',this.wrapper.appendChild(this.popup),this.hourColumn=this.popup.querySelector(".tp-hour-column"),this.minuteColumn=this.popup.querySelector(".tp-minute-column")}generateTimeOptions(){let t="";for(let e=0;e<24;e++){const i=e.toString().padStart(2,"0");t+=`<div class="tp-item tp-hour-item" data-value="${i}" role="option" tabindex="-1">${i}</div>`}this.hourColumn.innerHTML=t;let e="";for(let t=0;t<60;t+=this.config.minuteStep){const i=t.toString().padStart(2,"0");e+=`<div class="tp-item tp-minute-item" data-value="${i}" role="option" tabindex="-1">${i}</div>`}this.minuteColumn.innerHTML=e}setupEventListeners(){this.input.addEventListener("click",t=>{t.stopPropagation(),this.openPicker()}),this.input.addEventListener("focus",()=>{this.openPicker()}),this.input.addEventListener("keydown",t=>this.handleKeydown(t)),this.hourColumn.addEventListener("click",t=>{t.stopPropagation(),t.target.classList.contains("tp-hour-item")&&this.selectHour(t.target.dataset.value)}),this.minuteColumn.addEventListener("click",t=>{t.stopPropagation(),t.target.classList.contains("tp-minute-item")&&this.selectMinute(t.target.dataset.value)}),this.popup.addEventListener("click",t=>{t.stopPropagation()}),document.addEventListener("click",t=>{!this.isOpen||this.justOpened||this.wrapper.contains(t.target)||this.closePicker(),this.justOpened&&(this.justOpened=!1)})}handleKeydown(t){switch(t.key){case"ArrowDown":case"ArrowUp":t.preventDefault(),this.isOpen||this.openPicker();break;case"Enter":this.isOpen||(t.preventDefault(),this.openPicker());break;case"Escape":t.preventDefault(),this.closePicker(),this.input.focus();break;case"Tab":this.closePicker()}}selectHour(t){this.selectedHour=t,this.hourColumn.querySelectorAll(".tp-hour-item").forEach(e=>{const i=e.dataset.value===t;e.classList.toggle("selected",i),e.setAttribute("aria-selected",i)}),this.updateInputValue()}selectMinute(t){this.selectedMinute=t,this.minuteColumn.querySelectorAll(".tp-minute-item").forEach(e=>{const i=e.dataset.value===t;e.classList.toggle("selected",i),e.setAttribute("aria-selected",i)}),this.updateInputValue()}updateInputValue(){null!==this.selectedHour&&null!==this.selectedMinute&&(this.input.value=`${this.selectedHour}:${this.selectedMinute}`,this.input.dispatchEvent(new Event("change",{bubbles:!0})))}openPicker(){if(this.isOpen)return;e.closeAllPickers(this),this.isOpen=!0,this.justOpened=!0,this.popup.classList.add("show"),this.overlay.classList.add("show");const t=this.input.value;if(t){const[e,i]=t.split(":");e&&this.selectHour(e),i&&this.selectMinute(i),setTimeout(()=>{this.scrollToSelection(this.hourColumn),this.scrollToSelection(this.minuteColumn)},10)}}scrollToSelection(t){const e=t.querySelector(".selected");e&&(t.scrollTop=e.offsetTop-t.offsetTop-t.clientHeight/2+e.clientHeight/2)}closePicker(){this.isOpen=!1,this.popup.classList.remove("show"),this.overlay.classList.remove("show")}setValue(t){if(t&&/^\d{2}:\d{2}$/.test(t)){this.input.value=t;const[e,i]=t.split(":");this.selectedHour=e,this.selectedMinute=i}}getValue(){return this.input.value}destroy(){this.popup&&this.popup.parentNode&&this.popup.parentNode.removeChild(this.popup),e.instances=e.instances.filter(t=>t!==this)}static closeAllPickers(t=null){e.instances.forEach(e=>{e!==t&&e.isOpen&&e.closePicker()})}}if("undefined"!=typeof document){const t=()=>{document.querySelectorAll(".tp-input").forEach(t=>{new e(t,{minuteStep:30})})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}t.TimePicker=e}(this.TimePicker=this.TimePicker||{});
